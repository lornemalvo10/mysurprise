<!DOCTYPE html>
<html>
<head>
    <title>Om Shanti Om - Alternate World</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .fade-overlay{
            position:fixed;
            inset:0;
            background:black;
            opacity:0;
            pointer-events:none;
            transition:opacity 1s ease;
            z-index:9999;
        }
        
        .fade-overlay.active{
            opacity:1;
        }
        </style>
</head>
<body>

<audio id="bgMusic" src="bgmusic.mp3" loop></audio>

<!-- Background Music -->
<iframe width="0" height="0"
src="https://youtu.be/egd-86smC8s?si=Uo1FVmqOJIDeTXz0&t=34"
frameborder="0" allow="autoplay">
</iframe>

<div class="title">
    Welcome Shanti<br>
    <span class="subtitle">This is the Alternate World of Om Shanti Om!!</span>
</div>

<div class="scene-wrapper">
    <div class="scene">


    <img src="mukesh.png" class="character-img">

    <div class="dialogue-container">
        <span id="text"></span>
        <div class="next-btn" onclick="handleClick()">➜</div>
    </div>

    
</div>

<audio id="typeSound" src="typing.mp3"></audio>

<script>
    const lines = [
        "Hi Shanti...",
        "I am Mukesh Mehra!!",
        "I have a very important question to ask you...",
        "But before that, I want to say a few things..."
    ];
    
    let index = 0;
    let charIndex = 0;
    let typing = false;
    let started = false;
    
    const typeSound = document.getElementById("typeSound");
    const bgMusic = document.getElementById("bgMusic");
    
    function handleClick() {
        if (!started) {
            bgMusic.volume = 0.4;
            bgMusic.currentTime = 4;   // ✅ start from 4th second
            bgMusic.play();
            started = true;
        }
        nextLine();
    }
    
    function startTypingSound() {
        typeSound.currentTime = 0;
        typeSound.loop = true;
        typeSound.play();
    }
    
    function stopTypingSound() {
        typeSound.pause();
        typeSound.currentTime = 0;
    }
    
    function typeWriter(text) {
        if (charIndex < text.length) {
            document.getElementById("text").innerHTML += text.charAt(charIndex);
            charIndex++;
            setTimeout(() => typeWriter(text), 35);
        } else {
            typing = false;
            stopTypingSound();
        }
    }
    
    function nextLine() {
        if (typing) return;
    
        if (index < lines.length) {
            document.getElementById("text").innerHTML = "";
            charIndex = 0;
            typing = true;
            startTypingSound();
            typeWriter(lines[index]);
            index++;
        } else {
                const fade = document.getElementById("fade");
                fade.classList.add("active");

                setTimeout(()=>{
                    window.location.href = "page2.html";
                }, 1000);
        }
    }
    </script>

<script src="transition.js"></script>


</body>

<div class="fade-overlay" id="fade"></div>
</html>